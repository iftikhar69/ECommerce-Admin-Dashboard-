version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Initializing build environment..."
        - cd apps/admin
        - npm ci --legacy-peer-deps
        - echo "Dependencies installed."
    build:
      commands:
        - echo "Building Admin Dashboard..."
        - npm run build
        - echo "Build completed successfully."
  artifacts:
    baseDirectory: apps/admin/dist
    files:
      - "**/*"
  cache:
    paths:
      - node_modules/**/* 
      - apps/admin/node_modules/**/*
      - ~/.npm/**/*     # speeds up incremental builds
      - apps/admin/.next/cache/**/*  # for Next.js optimization
